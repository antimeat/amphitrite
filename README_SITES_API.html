<h1>CGI/API Script for Wave Data Partitioning</h1>
<hr>
<h2>Overview</h2>
<hr>
<p>CGI/API interface for managing and visualizing wave data partitions and comparing output to Ofcast active sites. It provides various functionalities, such as comparing active sites with configuration files, listing sites in HTML or JSON formats, and handling site-specific data.</p>
<h2>Features</h2>
<hr>
<ul>
<li>List wave data sites in both HTML and JSON formats.</li>
<li>Compare active sites with site configurations and exclusions.</li>
<li>Fetch and display site-specific data.</li>
<li>Handle active partition names and site titles with latitude and longitude information.</li>
</ul>
<h2>Usage</h2>
<hr>
<p>The script can be executed through a web server that supports CGI, with different parameters to trigger specific functionalities:</p>
<h3>Endpoints</h3>
<p>The script can be executed through a web server that supports CGI, with different parameters to trigger specific functionalities:</p>
<ul>
<li><code class="notranslate">?get=json_sites</code>: Returns site titles in JSON format.</li>
<li><code class="notranslate">?get=json_tables</code>: Returns aswave tables in JSON.</li>
<li><code class="notranslate">?get=html_sites</code>: Returns site titles with latitude and longitude from active Ofcast sites in HTML format.</li>
<li><code class="notranslate">?get=compare</code>: Compares the active sites with the site configurations and displays the result in HTML.</li>
<li><code class="notranslate">?get=active_sites</code>: Returns all active sites in JSON format.</li>
</ul>
<h3>Examples</h3>
<ul>
<li>
<p><strong>List all sites in HTML</strong>:<br>
<code class="notranslate">url http://wa-vw-er/webapps/er_ml_projects/davink/amphitrite/sites_api.cgi</code></p>
<h4>returns:</h4>
<pre class="notranslate"><code class="notranslate">22.5_107.5: -22.5,107.5
Abbot_Poin: -19.8,148.07
Adelaide: -34.75,138.375
...
Wickham: -12.52,130.84
Wonthaggi_: -38.59,145.51
Xena: -19.96,115.218
Yoorn: -20.34,115.79
</code></pre>
</li>
<li>
<p><strong>List all sites in HTML</strong>:<br>
<code class="notranslate">url http://wa-vw-er/webapps/er_ml_projects/davink/amphitrite/sites_api.cgi?get=json_tables</code></p>
<h4>returns:</h4>
<pre class="notranslate"><code class="notranslate">[
    {
        "name": "22.5_107.5",
        "lat": -22.5,
        "lon": 107.5
    },
    {
        "name": "Abbot_Poin",
        "lat": -19.8,
        "lon": 148.07
    },
    ...,
    {
        "name": "Xena",
        "lat": -19.96,
        "lon": 115.218
    },
    {
        "name": "Yoorn",
        "lat": -20.34,
        "lon": 115.79
    }
]

</code></pre>
</li>
<li>
<p><strong>List all sites in HTML</strong>:<br>
<code class="notranslate">url http://wa-vw-er/webapps/er_ml_projects/davink/amphitrite/sites_api.cgi?get=html_sites</code></p>
<h4>returns:</h4>
<pre class="notranslate"><code class="notranslate">Anglogold - Tropicana: -29.24,124.54
Boskalis - Dampier 7 Days: -20.6,116.75
Chevron - Gorgon: -20.46,114.84
...,
Woodside - Pyrenees: -21.54,114.12
Woodside - Scarborough 10 days: -19.926,113.242
Woodside - Stybarrow 10 Days: -21.45,113.82
</code></pre>
</li>
<li>
<p><strong>List all sites in HTML</strong>:<br>
<code class="notranslate">url http://wa-vw-er/webapps/er_ml_projects/davink/amphitrite/sites_api.cgi?get=compare</code></p>
<h4>returns:</h4>
<h4>returns:</h4>
<pre class="notranslate"><code class="notranslate">    Active Sites
</code></pre>
<table role="table">
<thead>
<tr>
<th align="center">Forecast site</th>
<th align="center">lat</th>
<th align="center">lon</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Anglogold - Tropicana</td>
<td align="center">-29.2400</td>
<td align="center">124.540</td>
</tr>
<tr>
<td align="center">Boskalis - Dampier 7 Days</td>
<td align="center">-20.6000</td>
<td align="center">116.750</td>
</tr>
<tr>
<td align="center">Chevron - Gorgon</td>
<td align="center">-20.4600</td>
<td align="center">114.840</td>
</tr>
<tr>
<td align="center">Chevron - Jansz</td>
<td align="center">-19.8100</td>
<td align="center">114.610</td>
</tr>
<tr>
<td align="center">...</td>
<td align="center">...</td>
<td align="center">...</td>
</tr>
</tbody>
</table>
<pre class="notranslate"><code class="notranslate">    Site Configurations
</code></pre>
<table role="table">
<thead>
<tr>
<th align="center">site</th>
<th align="center">table</th>
<th align="center">partitions</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">BHP - Pyrenees</td>
<td align="center">Pyrenees</td>
<td align="center">[0.001, 9.0], [9.0, 40.0]</td>
</tr>
<tr>
<td align="center">Boskalis - Dampier 7 Days</td>
<td align="center">Dampier_Po</td>
<td align="center">[0.001, 9.0], [9.0, 40.0]</td>
</tr>
<tr>
<td align="center">Boskalis - Scarborough 7 Days</td>
<td align="center">Scarb_new</td>
<td align="center">[0.001, 9.0], [9.0, 40.0]</td>
</tr>
<tr>
<td align="center">Chevron - Gorgon</td>
<td align="center">Gorgon</td>
<td align="center">[0.001, 10.0], [10.0, 40.0]</td>
</tr>
<tr>
<td align="center">...</td>
<td align="center">...</td>
<td align="center">...</td>
</tr>
</tbody>
</table>
<pre class="notranslate"><code class="notranslate">    Active Sites Not excluded
</code></pre>
<table role="table">
<thead>
<tr>
<th align="center">site</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Santos - Barossa</td>
</tr>
<tr>
<td align="center">Woodside - Scarborough 10 days</td>
</tr>
<tr>
<td align="center">Santos - Barossa KP40</td>
</tr>
</tbody>
</table>
<pre class="notranslate"><code class="notranslate">    Excluded from Active Sites
</code></pre>
<table role="table">
<thead>
<tr>
<th align="center">name</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Anglogold - Tropicana</td>
</tr>
<tr>
<td align="center">Chevron - North Whites Beach</td>
</tr>
<tr>
<td align="center">Chevron - Wheatstone Platform AFS</td>
</tr>
<tr>
<td align="center">Chevron Barrow Island AFS ML ext</td>
</tr>
<tr>
<td align="center">Santos - Van Gogh 4 days</td>
</tr>
<tr>
<td align="center">Woodside - Logistics Karratha 7 days</td>
</tr>
<tr>
<td align="center">Woodside - Logistics Learmonth 7 days</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h2>Logging</h2>
<hr>
<p>Errors are logged to <a href="http://wa-vw-er/webapps/er_ml_projects/davink/amphitrite/sites_api.log" rel="nofollow">sites_api.log</a>. Ensure the log file is writable by the web server.</p>
<h2>Author</h2>
<hr>
<p>Daz Vink: <a href="mailto:daz.vink@bom.gov.au">daz.vink@bom.gov.au</a></p>